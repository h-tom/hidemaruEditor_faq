<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta charset="Shift_JIS" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第II部〜知っていると便利な秀丸の機能　検索</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="base.css" />
  <!--[if lt IE 9]>
    <script src="./html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><a href="hmindex0.html"><img src="hide_by2.png" width="88" height="32" alt="Hidemaru Q and A" /></a></p>
<h1 id="TOP">第II部〜知っていると便利な秀丸の機能<br>　検索</h1>
<hr />
<h2 id="find">検索</h2>
<p>編集中のテキストファイルの中から、ある文字列を探したい時には、秀丸エディタの「検索」機能を使えば簡単にできます。</p>
<p>※文字列をあるだけ探したい場合は、<strong>grep 機能</strong>を使った方が効率的です。詳しくは「<a href="2_grep.html">●grep/タグジャンプ</a>」を参照して下さい。</p>
<ul>
<li><a href="#EXPLANATION">[解説]</a></li>
<li><a href="#SUPPLEMENTATION">[補足]</a>
<ul>
<li><a href="#SUPPLEMENTATION-1">「追加の条件」について</a></li>
<li><a href="#SUPPLEMENTATION-2">検索文字列の取り込みについて</a></li>
<li><a href="#SUPPLEMENTATION-3">複数行</a></li>
<li><a href="#SUPPLEMENTATION-4">補助メニューその１</a></li>
<li><a href="#SUPPLEMENTATION-5">補助メニューその２</a></li>
<li><a href="#SUPPLEMENTATION-6">ヒストリに常駐</a></li>
<li><a href="#SUPPLEMENTATION-7">検索文字数の上限</a></li>
</ul></li>
</ul>
<!-- h3 -->
<div class="marginleft">
<h3 id="EXPLANATION">[解説]</h3>
<p>編集中のファイルにある「<strong>Love</strong>」という文字列を探したいとします。</p>
<ol type="1">
<li><p>秀丸エディタの「<strong>検索</strong>」メニューから(もしくはツールバーやファンクションキーで)「<strong>検索</strong>」を選択して、<strong><span class="font_blue">「検索」</span></strong>のエディットボックスに「<strong>Love</strong>」と入力します。</p>
<p>通常は1行のみですが、<strong>複数行を入力可能</strong>にする事もできます。詳細は「<a href="#SUPPLEMENTATION">補足</a>」-「<a href="#SUPPLEMENTATION-3">複数行</a>」を参照してください。</p>
<p><img src="2_find_101.png" width="433" height="244" alt="検索ダイアログ" /><br />
</p></li>
<li><p>次に、適宜オプションを指定します。ここで、各オプションの意味は以下の通りです。</p>
<ul>
<li><p><strong><span class="font_blue">「大文字／小文字の区別</span>」チェックボックス：</strong><br />
検索文字列の大文字と小文字を区別して検索します。この項目が OFF の場合、上の例で「<strong>LOVE</strong>」や「<strong>love</strong>」も検索されます。</p></li>
<li><p><strong>「<span class="font_blue">単語の検索</span>」チェックボックス：</strong><br />
この項目が ON になっていると、「<strong>Lover</strong>」や「<strong>ILoveNY</strong>」等の、ある単語の一部になっている場合は検索されません。ここで言う「<strong>単語</strong>」とは、<strong>半角英字とアンダースコア("_")のみで構成された文字(列)</strong>を指します。</p></li>
<li><p><strong>「<span class="font_blue">正規表現</span>」チェックボックス：</strong><br />
検索文字列に「<strong>正規表現</strong>」が使える様になります。<br />
「<strong>正規表現</strong>」は「<a href="4_regular.html">●正規表現について</a>」を参照して下さい。<br />
複数行にマッチする検索に関しては制限が存在します。以下のリンク先を参照してください。</p>
<ul>
<li>秀丸エディタヘルプ<a href="https://help.maruo.co.jp/hidemaru/html/190_CmdSearch_Regular_ReturnCodeLimit.html" class="externallink" target="_blank">\nを使った複数行検索の際の制限について</a></li>
<li>「<a href="4_regular.html">●正規表現について</a>-<a href="4_regular.html#RETURNS">【５】 (補足) 秀丸エディタ上での複数行にまたがる検索について</a></li>
</ul></li>
<li><p><strong>「<span class="font_blue">あいまい検索</span>」チェックボックス：</strong><br />
「正規表現」をさらに便利にした「<strong>あいまい</strong>」な検索が可能になります(全半角同一視等)。<br />
「<strong>あいまい検索</strong>」は「<a href="2_fuzzy.html">●あいまい検索について</a>」を参照して下さい。</p></li>
<li><p><strong>「<span class="font_blue">選択した範囲</span>」チェックボックス：</strong><br />
検索の範囲があらかじめ「<strong>範囲選択</strong>」された部分に限定されます。範囲選択されていない時はこの項目は選択できない様になっています。</p>
<p>文書の一部分を選択する「BOX範囲選択」の場合は、「<strong>選択した範囲</strong>」は有効になりません。<br />
※このオプションの動作の詳細については、<a href="HME0083A.html"><strong>[HME0083A]</strong>●検索/置換の「選択した範囲」の動作</a>を参照してください。</p></li>
<li><p><strong>「<span class="font_blue">次の秀丸エディタも続けて検索</span>」チェックボックス</strong><br />
現在編集中の秀丸エディタウィンドウの他にも秀丸エディタが開いていた場合、その秀丸エディタウィンドウの内容に対しても検索を実行します。</p></li>
<li><p><strong>「<span class="font_blue">一周する</span>」チェックボックス</strong><br />
下検索の場合、ファイルの一番下まで検索し終わった場合、ファイルの先頭に戻って検索を続行します。上検索の場合は逆になります。</p></li>
<li><p><strong>「<span class="font_blue">追加の条件</span>」チェックボックス</strong><br />
追加の条件に従って検索する範囲を制限できます。</p></li>
<li><p><strong>「<span class="font_blue">検索文字列を強調</span>」チェックボックス</strong><br />
検索を実行後、検索に該当する文字列を強調表示します。</p></li>
<li><p><strong>「<span class="font_blue">検索したら閉じる</span>」チェックボックス</strong><br />
OFF だとダイアログ表示させたまま、検索を実行します。</p>
<p>ON の場合、検索を実行すると検索ダイアログを閉じます。また、ダイアログの<span class="btn-push">「閉じる」</span>ボタンが<span class="btn-push">「キャンセル」</span>と表示されます。</p></li>
</ul></li>
<li><p>最後に検索を行う<strong><span class="font_blue">方向</span></strong>を指定する事で検索が実行されます。</p>
<ul>
<li><p>「<strong><span class="font_blue">上検索</span></strong>」(現在のカーソル位置より上を検索します。)</p></li>
<li><p>「<strong><span class="font_blue">下検索</span></strong>」(現在のカーソル位置より下を検索します。)</p></li>
<li><p>「<strong><span class="font_blue">すべて検索</span></strong>」(ファイル全体を検索します。)<br />
「すべて検索」では、検索時の動作を選択できます。(ボタンを押すとメニューが表示されます。)</p>
<p><img src="2_find_21.png" width="636" height="354" alt="すべて検索" /><br />
</p>
<ul>
<li><p>「検索文字列を強調」<br />
カーソル位置はそのままにして検索文字列を強調します。</p>
<p>実行結果<br />
<img src="2_find_04.png" width="340" height="146" alt="検索文字列を強調" /><br />
</p></li>
<li><p><span id="ALLSEARCH_COLORING">「すべて検索 - 色付け 」</span><br />
検索文字列を更新せずに、検索条件に一致する箇所に色付けを行います。</p>
<p>実行結果<br />
<img src="2_find_02.png" width="340" height="160" alt="色付け1回目" /><br />
</p>
<p>連続で行うと、別の色で色付けします。<br />
<img src="2_find_03.png" width="340" height="160" alt="色付け2回目" /><br />
</p>
<p>矢印のような部分で、色付けした箇所に移動する事が可能です。<br />
<img src="2_find_16.png" width="142" height="33" alt="色付け2回目" /><br />
</p>
<p>個別に色付けした箇所に移動する事も設定で可能です。<br />
<img src="2_find_17.png" width="219" height="33" alt="色付け2回目" /><br />
</p>
<p>検索の色付けに関しては、「<strong><span class="env">動作環境</span>−検索−検索の色付け</strong>」で各種設定が可能です。</p></li>
<li><p>「すべて検索 - 複数選択」<br />
検索文字列を更新せずに、検索条件に一致する箇所を複数選択状態にします。</p>
<p>実行結果<br />
<img src="2_find_05.png" width="340" height="148" alt="すべて検索-複数選択" /><br />
</p></li>
<li><p>「すべて検索 - 一覧表示」<br />
<span class="attention_red">検索条件にマッチした箇所を含む行を</span>「一覧表示画面」に表示します。表示内容をクリックすると、その箇所に移動します。</p>
<p>「一覧表示画面」から簡易的に検索する事や、「すべて色付け」、「すべて選択(複数選択)」する事も可能です。「すべて行単位コピー」を選ぶと一覧の内容を合成したものが、クリップボードに入ります。 (行番号は入りません)</p>
<p>右下に「一覧表示画面」に表示している<span class="attention_red">行数</span>を表示しています。(マッチした数ではないので、注意すること。)</p>
<p>実行結果<br />
<img src="2_find_06.png" width="524" height="247" alt="すべて検索-一覧表示" /><br />
</p></li>
<li><p>「すべて検索 - アウトラインに表示」<br />
「アウトライン解析の内容」に<span class="attention_red">検索条件にマッチした文字以降</span>を合わせた内容を「一覧画面」に表示します。</p>
<p>元のアウトライン表示<br />
<img src="2_find_07.png" width="232" height="198" alt="すべて検索-アウトライン" /><br />
</p>
<p>「すべて検索 - アウトラインに表示」実行結果(「ツリー表示-通常」、「検索文字列を強調」がONの状態です)<br />
<img src="2_find_08.png" width="531" height="328" alt="すべて検索-アウトライン" /><br />
</p>
<p>(例は「ツリー表示」ですが、「関数一覧」や「強調表示一覧」でも、項目の下位レベルとして「検索結果」が表示されます)</p>
<p>表示内容をダブルクリックするか、表示項目を選択し「移動」ボタンを押すと、その箇所に移動します。</p>
<p><span class="attention_red">「アウトライン解析の内容」に検索結果を合成した内容になるため、アウトライン解析の設定が行われている必要があります。</span></p>
<p>アウトラインの設定が行われていない場合は、秀丸エディタによる「自動解析」の結果と検索結果の合成になりますが、「自動解析」に失敗した場合は、「一覧に何もありません」と表示されます。</p>
<p><img src="2_find_09.png" width="531" height="108" alt="すべて検索-アウトライン解析に失敗" /><br />
</p></li>
<li><p><span id="HITCOUNT">「上/下検索ボタンに個数表示」</span><br />
上検索/下検索 ボタン部分に、現状の設定条件でマッチした個数を表示します。</p>
<p>「上検索/下検索 ボタン」となっていますが、表示する箇所は設定で変更可能です。 (「<span class="env">動作環境</span>」-「検索」-<a href="#ALLSEARCH_SET">「すべて検索」</a>)</p>
<p>表示する箇所は以下の5種類です。(表示の上限を100に設定)</p>
<ul>
<li><p>「ボタン右上」、「ボタン左上」、「入力上下1」、「入力上下2」</p>
<div style="position:relative;">
<p><img src="2_find_101.png" width="433" height="244" alt="検索ダイアログ" /> <img src="2_find_36.png" width="433" height="244" alt="検索ダイアログ-表示箇所1" style="position: absolute; left: 0px; top: 0px;"/></p>
</div></li>
<li><p>「ボタン右上2」(「ボタン右上」の色違い)</p>
<div style="position:relative;">
<p><img src="2_find_101.png" width="433" height="244" alt="検索ダイアログ" /> <img src="2_find_37.png" width="433" height="244" alt="検索ダイアログ-表示箇所2" style="position: absolute; left: 0px; top: 0px;"/></p>
</div></li>
</ul></li>
<li><p>「スクロールバーにマップ」<br />
スクロールバー部分に、現状の設定条件でマッチした行の位置を表示します。</p>
<p><img src="2_find_38.png" width="629" height="458" alt="スクロールバーにマップ" /><br />
</p></li>
<li><p><span id="ALLSEARCH_SET">「設定」</span><br />
「すべて検索」関連の設定画面(「<strong><span class="env">動作環境</span>−検索−すべて検索</strong>」)を表示します。</p>
<p><img src="2_find_39.png" width="605" height="433" alt="すべて検索の設定画面" /><br />
</p>
<ul>
<li><p>すべて検索ボタンの動作を設定します。</p>
<div class="mark_dt">
<dl>
<dt>ボタンの種類</dt>
<dd><p>ボタンの動作を設定します。(標準=xx を選んだ場合、ボタン表示が"xx"になります)</p>
<ul>
<li>ドロップダウンのみ</li>
<li>ドロップダウン付き(標準=適用)</li>
<li>ドロップダウン付き(標準=色付け)</li>
<li>ドロップダウン付き(標準=複数選択)</li>
<li>ドロップダウン付き(標準=一覧)</li>
</ul>
</dd>
<dt>「「すべて検索 - 色付け」実行時、検索文字列更新」、「「すべて検索 - 複数選択」実行時、検索文字列更新」</dt>
<dd>セットされている検索バッファを更新するか、しないかの設定です。有効にした場合は、「すべて検索」を実行した条件で、上検索/下検索を実行できます。
</dd>
</dl>
</div></li>
<li><p>ヒット候補の表示について設定します。</p>
<div class="mark_dt">
<dl>
<dt>ヒット候補が無いとき上/下検索ボタンをグレー表示</dt>
<dd>候補が無いときは、上/下検索ボタンを無効化します。
</dd>
<dt>上/下検索ボタンに個数表示</dt>
<dd><ul>
<li><p>表示方法<br />
以下の設定があります。表示状態は<a href="#HITCOUNT">「上/下検索ボタンに個数表示」</a>を参照してください。</p>
<ul>
<li>ボタン右上</li>
<li>ボタン左上</li>
<li>入力上下1</li>
<li>入力上下2</li>
<li>ボタン右上2</li>
</ul></li>
<li><p>個数の上限<br />
検索数の上限を設定します。自分で入力も可能ですが、デフォルトで以下の設定があります。</p>
<ul>
<li>100</li>
<li>1000</li>
<li>10000</li>
</ul></li>
</ul>
</dd>
<dt>スクロールバーにマップ</dt>
<dd><ul>
<li><p>表示方法<br />
スクロールバーに表示するタイミングを設定します。</p>
<ul>
<li>標準(入力時、検索後の両方)</li>
<li>入力時のみ</li>
<li>検索後のみ</li>
</ul></li>
</ul>
</dd>
</dl>
</div></li>
</ul></li>
</ul></li>
</ul></li>
</ol>
<h3 id="SUPPLEMENTATION">[補足]</h3>
<!-- h4 -->
<div class="marginleft">
<h4 id="SUPPLEMENTATION-1">「追加の条件」について</h4>
<p><img src="2_find_01.png" width="368" height="386" alt="追加の条件ダイアログ" /><br />
</p>
<p>「追加の条件」を使うと、検索の対象にする箇所を、限定したり除外する事が可能です。</p>
<ul>
<li><p>「カラー表示の条件」はダイアログの注意書きにあるように、「複数行コメント」の設定で、各部分を認識している場合のみ有効です。</p></li>
<li><p>「範囲の指定/カラーマーカー内」は、<strong>「選択した範囲内のみ」</strong>と似ていますが、通常の範囲選択と違い、複数箇所を対象に出来ます。<br />
以下のいずれかを指定可能です。</p>
<ul>
<li>「一時的なカラーマーカー」の範囲</li>
<li>「すべて検索 - 色付け」された範囲</li>
<li>「複数選択予約」された範囲</li>
</ul></li>
<li><p><strong>「選択した範囲内のみ」</strong> と 「追加の条件」は併用可能です。</p></li>
</ul>
<p>追加の条件で「一時的なカラーマーカー」の範囲を使った例です。</p>
<ul>
<li><p>例その１</p>
<ol type="1">
<li><p>まず、適当な範囲をBOX選択します。<br />
</p>
<p><img src="2_find_31.png" width="581" height="220" alt="箱形選択状態" /><br />
</p></li>
<li><p>選択範囲にカラーマーカをつけます<br />
</p>
<p><img src="2_find_32.png" width="580" height="220" alt="カラーマーカー追加" /><br />
</p></li>
<li><p>以下の条件で「すべて検索 - 色付け 」を行います。</p>
<ul>
<li>検索文字に「秀丸エディタ」を設定</li>
<li>追加の条件に「一時的なカラーマーカー」を指定</li>
</ul>
<p>マッチ範囲の先頭と末尾が、カラーマーカーの範囲内に入っている箇所のみ、マッチしています。</p>
<p><img src="2_find_33.png" width="617" height="230" alt="検索" /><br />
</p></li>
</ol></li>
<li><p>例その２</p>
<ol type="1">
<li><p>カラーマーカーはまとまっていなくても問題ありません。バラバラにマーキングを行います。</p>
<p><img src="2_find_34.png" width="591" height="246" alt="バラバラにマーキング" /><br />
</p></li>
<li><p>以下の条件で「すべて検索 - 色付け 」を行います。</p>
<ul>
<li>正規表現を有効にする</li>
<li>検索文字に「b+」を設定</li>
<li>追加の条件に「一時的なカラーマーカー」を指定</li>
</ul>
<p>マッチ範囲の先頭と末尾が、カラーマーカーの範囲内に入っている箇所のみ、マッチしています。</p>
<p>正規表現の"+"を指定した場合、検索エンジンにより結果が変わります。画像はhmjre.dllの場合ですが、他の検索エンジンを使用した場合、4行目、10行目はマッチしません。</p>
<p><img src="2_find_35.png" width="586" height="260" alt="検索" /><br />
</p></li>
</ol></li>
</ul>
<h4 id="SUPPLEMENTATION-2">検索文字列の取り込みについて</h4>
<p>検索ダイアログを開くとき、<strong>範囲選択していない場合</strong>は、カーソル位置から後の単語部分を「検索内容」として取り込みます。</p>
<p>ファイルの先頭部分にカーソルがある時に、検索ダイアログを開いた場合<br />
<img src="2_find_11.png" width="493" height="368" alt="検索ダイアログの取り込み文字" /><br />
</p>
<p>この状態から、検索ダイアログを呼び出すキー(デフォルトは <kbd>[Ctrl]</kbd>+<kbd>[F]</kbd>)を押すと、その隣の単語部分まで取り込み範囲が拡大されます。複数回キーを押すとさらに拡大され取り込まれます。ただし改行までが限度です。<br />
取り込み範囲が拡大されるのは、<strong><span class="font_red">範囲選択しないで検索ダイアログを開いた場合のみです。</span></strong><strong>範囲選択していた場合</strong>、その箇所が取り込まれますが、キーを押しても範囲は<strong>拡大しません。</strong></p>
<ul>
<li><p>(2回目)<br />
<img src="2_find_12.png" width="500" height="190" alt="検索ダイアログの取り込み2回目" /><br />
</p></li>
<li><p>(3回目)</p>
<div style="position:relative;">
<p><img src="2_find_12.png" width="500" height="190" alt="検索ダイアログの取り込み2回目" /> <img src="2_find_13.png" width="500" height="190" alt="検索ダイアログの取り込み3回目" style="position: absolute; left: 0px; top: 0px;"/></p>
</div></li>
<li><p>(4回目)</p>
<div style="position:relative;">
<p><img src="2_find_12.png" width="500" height="190" alt="検索ダイアログの取り込み2回目" /> <img src="2_find_14.png" width="500" height="190" alt="検索ダイアログの取り込み4回目" style="position: absolute; left: 0px; top: 0px;"/></p>
</div></li>
<li><p>(5回目)</p>
<div style="position:relative;">
<p><img src="2_find_12.png" width="500" height="190" alt="検索ダイアログの取り込み2回目" /> <img src="2_find_15.png" width="500" height="190" alt="検索ダイアログの取り込み5回目" style="position: absolute; left: 0px; top: 0px;"/></p>
</div></li>
</ul>
<h4 id="SUPPLEMENTATION-3">複数行</h4>
<p>検索ダイアログの「検索」入力部分は通常1行のみですが、複数行を入力可能にする事もできます。「検索」入力部の横にある<span class="rotate90">▲</span>マークを押すと、メニューが表示されます。</p>
<p><img src="2_find_18.png" width="650" height="169" alt="検索ダイアログのメニュー" /><br />
</p>
<p>メニューの「<span class="font_red_bold">複数行</span>」を選択すると、ダイアログの「検索」部分が広がります。複数行にわたる範囲選択をしている場合は、「<span class="font_red_bold">範囲選択の取り込み</span>」で取り込む事も出来ます。</p>
<p><img src="2_find_102.png" width="433" height="314" alt="複数行の検索ダイアログ" /><br />
</p>
<h4 id="SUPPLEMENTATION-4">補助メニューその１</h4>
<p>「検索」入力部の横にある<span class="rotate90">▲</span>マークを押すと、表示されるメニューです。正規表現などの説明になっているので、困ったときは押してみましょう。</p>
<p><img src="2_find_menu01.png" width="353" height="740" alt="検索ダイアログのメニューその１" /><br />
</p>
<h4 id="SUPPLEMENTATION-5">補助メニューその２</h4>
<p>「検索」ダイアログのタイトルバー部分にある「▼」マークを押すと、メニューが表示されます。キーからも出来ますが、「<strong>検索文字列の追加取得</strong>」等もマウスから可能です。「<strong>検索の動作環境</strong>」を開いたり、「<strong>置換ダイアログ</strong>」に切り替える事も可能です。</p>
<p><img src="2_find_103.png" width="448" height="434" alt="検索ダイアログのメニューその２" /><br />
</p>
<h4 id="SUPPLEMENTATION-6">ヒストリに常駐</h4>
<p>検索すると、検索内容が履歴(ヒストリ)に保存されていきますが、上限があるため、検索を繰り返すと履歴の古いものから順に削除されていきます。</p>
<p>検索内容に「<strong>ヒストリに常駐</strong>」を設定すると、検索が行われても、履歴から削除される事がなくなります。「<strong>ヒストリに常駐</strong>」は「<span class="rotate90"><strong>&gt;</strong></span>」を押し履歴を表示させ、常駐させたい内容のところで右クリックメニューを使って設定します。<br />
<img src="2_find_19.png" width="433" height="152" alt="ヒストリに常駐" /><br />
</p>
<p>常駐に設定すると、内容の横に「<span class="history_set">★</span>」が表示され、「ヒストリに常駐」にチェックが入ります。<br />
<img src="2_find_20.png" width="290" height="159" alt="ヒストリに常駐その２" /><br />
</p>
<p>「ヒストリに常駐」は検索だけではなく、置換やgrepでも設定可能です。</p>
<h4 id="SUPPLEMENTATION-7">検索文字数の上限</h4>
<p><strong><span class="font_blue">複数行の「検索」</span></strong>エディットボックスに入力し、検索に指定できる文字列には上限があり、約4000文字が上限となります。</p>
<p>上限を超えると、<span class="attention_red">警告が表示</span>されます。</p>
<p><img src="2_find_104.png" width="433" height="113" alt="検索ダイアログの警告" /><br />
</p>
</div>
</div>
<hr />
<p><a href="hmindex0.html">目次に戻る</a></p>
</body>
</html>
