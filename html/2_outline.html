<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta charset="Shift_JIS" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="author" content="h-tom" />
  <title>第II部〜知っていると便利な秀丸の機能　アウトライン解析の枠</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="base.css" />
  <!--[if lt IE 9]>
    <script src="./html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><a href="./hmindex0.html"><img src="./hide_by2.png" width="88" height="32" alt="Hidemaru Q and A" /></a></p>
<section id="TOP" class="level1">
<h1>第II部〜知っていると便利な秀丸の機能<br>　アウトライン解析の枠</h1>
<hr />
<section id="OUTLINE" class="level2">
<h2>アウトライン解析の枠</h2>
<p>秀丸エディタ Ver.6.00以降では「アウトライン解析の枠」が使用できます。</p>
<p>文書の構造をツリー状に表示したり、分類ごとにまとめたりして表示できます。また、「関数一覧」や「強調表示一覧」も表示できます。</p>
<p>「アウトライン解析の枠」を表示するには、メニューの「表示」から「アウトライン解析の枠」にチェックを入れます。</p>
<ul>
<li><a href="#EXPLANATION">解説</a>
<ul>
<li><a href="#EXPLANATION-1">とりあえず使ってみよう</a></li>
<li><a href="#EXPLANATION-2">設定を変更してみよう</a>
<ul>
<li><a href="#EXPLANATION-2-1">見出しの定義</a></li>
<li><a href="#EXPLANATION-2-2">オプションの説明</a></li>
<li><a href="#EXPLANATION-2-3">ツリー表示の分類について</a></li>
<li><a href="#EXPLANATION-2-4">ツリーの操作</a></li>
</ul></li>
</ul></li>
</ul>
<section id="EXPLANATION" class="level3">
<h3>[解説]</h3>
<p>「アウトライン解析の枠」に各種項目を表示するには設定が必要です。</p>
<ul>
<li><p>「ツリー表示」の「通常」や「分類」では、ツリーのレベルや分類を設定します。</p></li>
<li><p>「強調表示一覧」では、ファイルタイプ別で設定する強調表示の設定を使用します。</p>
<p><img src="./2_outline_001.png" width="322" height="237" alt="アウトライン解析の方法-強調表示一覧" /><br />
</p></li>
<li><p>「関数一覧」では、秀丸エディタがファイルを解析し、関数の一覧を自動的に表示します。現状では「言語」の内容は「C言語/Java等」のみしか選ぶことができません。「C言語/Java等」の場合、以下の言語に対応しています。</p>
<ul>
<li>C</li>
<li>C++</li>
<li>Java</li>
<li>JavaScript</li>
<li>C#</li>
<li>Objective-C</li>
<li>go言語</li>
</ul></li>
</ul>
<section id="EXPLANATION-1" class="level4">
<h4>とりあえず使ってみよう</h4>
<p>「アウトライン解析の枠」にどの様に表示されるかを見るため、デフォルトで持っている設定を使ってみます。</p>
<p>メニューの「その他」-「<span class="filetype">ファイルタイプ別の設定</span>」でダイアログを表示させ、「設定の対象」-「アウトライン」-「解析」を選択し、「アウトライン解析の方法」を「ツリー表示-通常」を選択します。</p>
<p><img src="./2_outline_002.png" width="770" height="564" alt="アウトライン解析の方法-ツリー表示-通常" /><br />
</p>
<p>「リセット」を押すと表示されるメニューから、「<strong>"."の数で階層を表す用</strong>」を選ぶと、「ツリー表示の定義」が以下のように設定されます。</p>
<p><img src="./2_outline_003.png" width="355" height="185" alt="アウトライン解析の方法-ドットの数で階層を表す用" /><br />
</p>
<p><strong>一時的な設定にするため</strong><span class="attention_red">「保存しないで更新」</span>を押して、「ファイルタイプ別の設定」を閉じ、以下の内容をコピーして設定した秀丸エディタに貼り付けます。</p>
<pre class="macro"><code>.レベル1-1
表題-１
..レベル2-1
章-1
...レベル3-1
節-1
....レベル4-1
項-1
.....レベル5-1
段落-1
......レベル6-1
その他-1

.レベル1-2
表題-2
..レベル2-2
章-2
...レベル3-2
節-2
....レベル4-2
項-2
.....レベル5-2
段落-2
......レベル6-2
その他-2</code></pre>
<p>設定内容に従い「アウトライン解析の枠」にツリー状の構成が表示されます。</p>
<p><img src="./2_outline_004.png" width="450" height="356" alt="アウトライン解析の方法-ツリー表示" /><br />
</p>
<p>簡単ですが「アウトライン解析の枠」の「ツリー表示」の例になります。「アウトライン解析の枠」の各項目をクリックすると、その行にカーソルが移動したり各項目内をすべて範囲選択する等、操作が可能になります。(例は1行なのであまり意味は無いですが…)</p>
<p>アウトライン解析で「ツリー表示の定義」を設定すると、<strong>「折りたたみ」「見出し」「部分編集」</strong>ができるようになります。「<a href="./2_outline_functions.html">第II部〜知っていると便利な秀丸の機能　アウトライン関連 見出し・折りたたみ・部分編集</a>」を参照。</p>
</section>
<section id="EXPLANATION-2" class="level4">
<h4>設定を変更してみよう</h4>
<p>「ツリー表示の定義」の設定について解説します。</p>
<p>まず、「ツリー表示の定義」の「レベル1」を選択し「プロパティ」を押して、設定画面を表示させます。</p>
<p><img src="./2_outline_005.png" width="465" height="114" alt="アウトライン解析の方法-ドットの数で階層を表す用" /><br />
</p>
<p>初期状態は「オプション」が閉じられた状態で表示されますが、<span class="btn-push">「オプション」</span>ボタンを押す事でオプション設定部分の表示/非表示を切り替える事が出来ます。</p>
<p><img src="./2_outline_006.png" width="447" height="345" alt="アウトライン解析の方法-プロパティ画面小" /><br />
</p>
<p><img src="./2_outline_007.png" width="254" height="110" alt="アウトライン解析の方法-矢印" /><br />
</p>
<p><img src="./2_outline_008.png" width="692" height="345" alt="アウトライン解析の方法-プロパティ画面大" /><br />
</p>
<section id="EXPLANATION-2-1" class="level5">
<h5>見出しの定義</h5>
<div class="mark_dt">
<p>ここの「見出しの定義」とオプションの「表示範囲」でツリーに表示される内容が決まります。</p>
<dl>
<dt>「行頭の文字列」</dt>
<dd>
<p>行頭にある指定された文字列を見出しとして解釈します。</p>
<p>「<a href="#EXPLANATION-1">とりあえず使ってみよう</a>」で使用した<strong>「"."の数で階層を表す用」</strong> は、この設定になります。</p>
<p>文字列内の"n"は、<span class="attention_red">数値としても解釈されます。</span></p>
<pre><code>(n)   --&gt; (1)、(10)、(100)
第n章 --&gt; 第1章、第10章、第100章
n.n   --&gt; 1.2、2.1、3.4</code></pre>
<p>"n"は半角数字しか認識しません。全角や漢字を含めたい場合は「文字列」にして「正規表現」を使ってください。</p>
<p>"n"を使った設定例</p>
<ul>
<li><p>ツリー定義：<br />
<img src="./2_outline_048.png" width="178" height="125" alt="行頭の文字列の設定" /><br />
</p></li>
<li><p>実際の表示：<br />
<img src="./2_outline_049.png" width="484" height="280" alt="行頭の文字列設定表示" /><br />
</p></li>
</ul>
</dd>
<dt>「行頭の記号」</dt>
<dd>
<p>設定した文字のいずれかを見出しとして解釈します。(設定した内容を文字集合として扱う)</p>
<pre><code>#%&amp;   --&gt; &quot;#&quot; or &quot;%&quot; or &quot;&amp;&quot; のいずれかの文字を見出しと認識する</code></pre>
<p>「<a href="#EXPLANATION-2-4">ツリーの操作</a>」で「レベルの操作」を行った場合は、先頭の文字を使います。</p>
<p>設定例</p>
<ul>
<li><p>ツリー定義：<br />
<img src="./2_outline_050.png" width="205" height="126" alt="行頭の記号の設定" /><br />
</p></li>
<li><p>実際の表示：<br />
<img src="./2_outline_051.png" width="355" height="166" alt="行頭の記号設定表示" /><br />
</p></li>
</ul>
</dd>
<dt>「文字列」</dt>
<dd>
<p>設定した文字列を見出しとして解釈します。以下のオプションが選択可能です。</p>
<ul>
<li>大文字/小文字の区別</li>
<li>単語の検索</li>
<li>正規表現</li>
</ul>
<p><img src="./2_outline_009.png" width="367" height="103" alt="見出し-文字列" /><br />
</p>
<p>正規表現をONした場合、分類モード時のグループ名に正規表現タグを指定できます。「<a href="#EXPLANATION-2-3">ツリー表示の分類について</a>」を参照してください。</p>
</dd>
<dt>「関数」</dt>
<dd>
関数を見出しとして解釈します。対応する言語は、関数一覧と同じになります。
</dd>
<dt>「強調表示」</dt>
<dd>
<p>強調表示されている行を見出しとして解釈します。</p>
<p><img src="./2_outline_010.png" width="317" height="173" alt="見出し-強調表示" /><br />
</p>
</dd>
</dl>
</div>
</section>
<section id="EXPLANATION-2-2" class="level5">
<h5>オプションの説明</h5>
<div class="mark_dt">
<dl>
<dt>「インデント禁止」</dt>
<dd>
<p>「行頭の文字列」と「行頭の記号」のみに設定可能な項目。見出しに設定した文字列/記号の前に、タブ文字や空白文字を認めない場合は設定します。</p>
<ul>
<li><p>例)OFFの場合は、「レベル1-3」を見出しと認識する。(ONの場合は認識しない)</p>
<p><img src="./2_outline_011.png" width="442" height="102" alt="インデント禁止" /><br />
</p></li>
</ul>
</dd>
<dt>「インデントの深さでレベルを決める」</dt>
<dd>
<p>前の見出しとの比べて、インデントが深ければ１つ下のレベルになります。</p>
<p>「ツリー表示の定義」の「レベルの見せ方」が「<strong>絶対的</strong>」になっていると、<span class="attention_red">この指定は無効</span>です。</p>
<p>実際に設定してみます。「追加」ボタンを押して、現状の設定に以下の内容を追加します。</p>
<p><img src="./2_outline_012.png" width="692" height="345" alt="インデントの深さでレベルを決める設定" /><br />
</p>
<p><strong>一時的な設定にするため</strong><span class="attention_red">「保存しないで更新」</span>を押して、閉じます。</p>
<p>「レベル2-1」に以下の内容を追加します</p>
<div class="macro">
<pre><code>- aaaa
  * bbbb</code></pre>
</div>
<p><img src="./2_outline_013.png" width="440" height="205" alt="インデントの深さでレベルを決める設定例1" /><br />
</p>
<p>「レベルの見せ方」が「<strong>絶対的</strong>」になっている為、<strong>レベル7の見出し</strong>として認識されます。ここで設定を「<strong>絶対的</strong>」から「<strong>相対的</strong>」に変更します。</p>
<p>「ツリー表示の定義」画面にある「ツリーの動作」をクリックすると、設定画面が開きます。</p>
<p><img src="./2_outline_014.png" width="242" height="291" alt="レベルの見せ方を開く" /><br />
</p>
<p>ここで、レベルの見せ方を、「相対的」に変更します。</p>
<p><img src="./2_outline_015.png" width="371" height="218" alt="ツリーの動作設定画面" /><br />
</p>
<p><strong>一時的な設定にするため</strong><span class="attention_red">「保存しないで更新」</span>を押して、閉じます。</p>
<p><img src="./2_outline_016.png" width="440" height="218" alt="インデントの深さでレベルを決める設定例2" /><br />
</p>
<p>「絶対的」な場合と表示状態が変化しましたが、これは直ぐ上の見出しとレベルの比較を行い、レベルが低ければ「下位レベル」と判断している(レベル7とは認識しない)からです。さらに、"bbbb" は、"aaaa" より、インデントが深くなっている為、さらに下位と判断されます。</p>
<p>やっと、オプションの説明になります。</p>
<p>ONの場合認識</p>
<div class="macro">
<pre><code>├レベル2-1
│└aaaa      レベル2より低いレベルなので1段下げ
│  └bbbb    インデントの深さより、&quot;aaaa&quot; より低いレベルなので1段下げ</code></pre>
</div>
<p>OFFの場合認識</p>
<div class="macro">
<pre><code>├レベル2-1
│├aaaa      レベル2より低いレベルなので1段下げ
│└bbbb      インデントの深さは関係ないので、&quot;aaaa&quot; と同じレベル</code></pre>
</div>
<p>このチェックがONの場合、インデントだけで、レベルを決める事が出来ます。</p>
</dd>
<dt>「1つ上のツリー定義と同じレベルとして定義」</dt>
<dd>
<p>「追加」していくと上のレベルから順番に定義されていきます。「インデントの深さでレベルを決める」の説明で追加した項目は、「<strong>レベル7</strong>」になっています。</p>
<p><img src="./2_outline_017.png" width="356" height="179" alt="ツリーの表示画面1" /><br />
</p>
<p>このオプションを「<strong>ON</strong>」にすると、「一つ上のツリー定義と同じレベル」になります。この場合は「<strong>レベル6</strong>」。"LV"の項目が空白なのは一つ上と同じという意味。</p>
<p><img src="./2_outline_018.png" width="356" height="179" alt="ツリーの表示画面2" /><br />
</p>
<p>通常は「<strong>一つのレベルに対し定義は1個</strong>」という状態ですが、このチェックをONにする事で「<strong>一つのレベルに対し定義を複数個</strong>」設定する事が出来ます。</p>
</dd>
<dt>「コメントを無視」</dt>
<dd>
「<span class="filetype">ファイルタイプ別の設定</span>」-「デザイン」で、「コメント」と認識している箇所を見出しと認識させたくない場合は「ON」にしてください。
</dd>
<dt>「文字定数を無視」</dt>
<dd>
「<span class="filetype">ファイルタイプ別の設定</span>」-「デザイン」で、「文字定数」と認識している箇所を見出しと認識させたくない場合は「ON」にしてください。
</dd>
<dt>「展開/折りたたみ状態」</dt>
<dd>
<p>ツリー表示の状態を設定します。</p>
<ul>
<li>標準<br />
子があるときは初期状態で展開し手動で折り畳みも可能。</li>
<li>初期状態でツリーを折りたたみ<br />
最初に表示する場合はツリーを折りたんだ状態にする。</li>
<li>展開したままで固定<br />
子があるときに[+]/[-]マークなどは表示せずに、常に展開された状態。</li>
</ul>
</dd>
<dt>「表示範囲」</dt>
<dd>
<p>見出しを表示する範囲を決めます。</p>
<p>以下の場合に適用されます。</p>
<ul>
<li>「アウトライン解析の枠」</li>
<li>「アウトライン解析...」のダイアログ</li>
<li>「見出しバー」</li>
</ul>
<p>以下の選択ができます。</p>
<ul>
<li><p>自動</p></li>
<li><p>ヒットした文字以降<br />
<img src="./2_outline_019.png" width="190" height="103" alt="ヒットした文字以降" /><br />
</p></li>
<li><p>ヒットした文字より後<br />
<img src="./2_outline_020.png" width="190" height="103" alt="ヒットした文字より後" /><br />
</p></li>
<li><p>ヒットした文字のみ<br />
<img src="./2_outline_021.png" width="190" height="103" alt="ヒットした文字のみ" /><br />
</p></li>
<li><p>行全体<br />
(この例では「ヒットした文字以降」と同じ)</p></li>
<li><p>次の行全体<br />
<img src="./2_outline_022.png" width="190" height="103" alt="次の行全体" /><br />
</p></li>
</ul>
<p>ツリーに表示する内容を任意の部分だけにしたい場合は、「見出しの定義」を「文字列」にして、正規表現を使います。後読み(先頭にある記号の指定等)と先読み(表示したくない後方部分を指定)を使うか、ヒットした扱いにするタグ指定を使います。そして「表示範囲」を「ヒットした文字のみ」にすれば、任意部分のみ表示可能になります。</p>
</dd>
<dt>「自動的な選択/部分編集の対象」</dt>
<dd>
<p>ONの場合、以下の状態に影響があります。</p>
<ul>
<li>「部分編集」コマンドを実行したとき、自動的に部分編集となる範囲の境界となる見出しかどうか</li>
<li>「折りたたみ用の余白」で大きな[+]/[-]マークとして表示され、折りたたみの対象となるかどうか</li>
<li>「次の見出し」「前の見出し」コマンドでジャンプする対象となるかどうか</li>
</ul>
</dd>
<dt><span id="option-9">「見出しバーに表示する対象」</span></dt>
<dd>
OFFにすると、見出しバーに表示しなくなります。
</dd>
<dt>「行番号表示」</dt>
<dd>
見出しに行番号も表示する/しないの設定です。
</dd>
</dl>
</div>
</section>
<section id="EXPLANATION-2-3" class="level5">
<h5>ツリー表示の分類について</h5>
<p>「分類モード時のグループ名」を入力しておくと「ツリー表示-分類」が使用できます。</p>
<p><img src="./2_outline_023.png" width="319" height="225" alt="分類について" /><br />
</p>
<p>現状の設定にグループ名を追加してみます。</p>
<p><img src="./2_outline_024.png" width="355" height="229" alt="分類について" /><br />
</p>
<p>「ツリー表示-分類」に変更すると、表示が以下のように設定したグループ名毎になります。</p>
<p><img src="./2_outline_025.png" width="189" height="333" alt="分類時の表示" /><br />
</p>
<p>「見出しの定義」で「文字列」を選択し「正規表現」を有効にした場合、グループ名に正規表現でマッチしたタグを指定できます。</p>
<p><img src="./2_outline_047.png" width="434" height="167" alt="分類時の表示-正規表現タグの指定" /><br />
</p>
</section>
<section id="EXPLANATION-2-4" class="level5">
<h5>ツリーの操作</h5>
<p>「アウトライン解析の枠」で、見出しの項目を選択すると、右クリックメニューでツリーの単位の操作が可能です。</p>
<p><img src="./2_outline_039.png" width="304" height="262" alt="ツリーの右クリックメニュー1" /><br />
</p>
<p>例えば「切り抜き」ですが、選択した見出し下にあるツリーも対象になります。</p>
<p>実行前</p>
<div class="macro">
<pre><code>├レベル1-1
│└レベル2-1
│  └レベル3-1  &lt;----ここを選択し、「切り抜き」を実行すると下のツリーも対象になる。
│    └レベル4-1
│      └レベル5-1
│        └レベル6-1
├レベル1-2</code></pre>
</div>
<p>「切り抜き」実行後</p>
<div class="macro">
<pre><code>├レベル1-1
│└レベル2-1
├レベル1-2</code></pre>
</div>
<p>「コピー」や「範囲選択」も同様に、ツリー構造になっている場合は、選択以下のツリーも対象になります。</p>
<p>「上に挿入」/「下に挿入」は、選択した見出しの上か下に、指定したレベルの見出しを追加可能です。</p>
<p><img src="./2_outline_040.png" width="445" height="294" alt="ツリーの右クリックメニュー2" /><br />
</p>
<p>「ツリー操作」では、見出しのレベル上げたり、下げたりも可能です。「ツリーそのものをコピー」では「アウトライン解析の枠」の内容をクリップボードにコピーします。ツリーの場合は罫線(?)ではなく、レベルの数だけTABコード(0x09)が入ります。</p>
<p><img src="./2_outline_041.png" width="578" height="332" alt="ツリーの右クリックメニュー3" /><br />
</p>
</section>
</section>
</section>
</section>
</section>
<hr />
<p><a href="#TOP">ページトップ</a>　<a href="hmindex0.html">目次に戻る</a></p>
</body>
</html>
