<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta charset="Shift_JIS" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="author" content="h-tom" />
  <title>第II部〜知っていると便利な秀丸の機能　EditorConfig</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="base.css" />
  <!--[if lt IE 9]>
    <script src="./html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><a href="./hmindex0.html"><img src="./hide_by2.png" width="88" height="32" alt="Hidemaru Q and A" /></a></p>
<section id="TOP" class="level1">
<h1>第II部〜知っていると便利な秀丸の機能<br>　EditorConfig</h1>
<hr />
<section id="editorconfig" class="level2">
<h2>EditorConfig</h2>
<p>秀丸エディタ Ver.9.00以降では「EditorConfig」に対応しています。</p>
<ul>
<li><a href="#EXPLANATION">解説</a>
<ul>
<li><a href="#EXPLANATION-1">EditorConfigを有効にする</a></li>
</ul></li>
<li><a href="#SUPPLEMENTATION">補足</a>
<ul>
<li><a href="#SUPPLEMENTATION-1">設定ファイルの記述方法</a></li>
<li><a href="#SUPPLEMENTATION-2">マクロ関連</a></li>
</ul></li>
</ul>
<section id="EXPLANATION" class="level3">
<h3>[解説]</h3>
<p>「EditorConfig」とは、さまざまなエディター や IDE で、コーディングスタイルを統一するための仕組みです。「.editorconfig」という設定ファイルを参照し、各プロジェクト毎やファイル毎にコーディングスタイルを設定できます。</p>
<p>詳細は「<a href="https://editorconfig.org/" class="externallink" target="_blank" rel="noopener">EditorConfigのwebサイト</a>」を参照してください。</p>
<p>秀丸エディタで対応しているのは、以下になります。</p>
<ul>
<li><strong>charset</strong>(ファイルのエンコード)</li>
<li><strong>end_of_line</strong>(改行コードの設定)</li>
<li><strong>indent_style</strong>(インデントの種類。タブコードを使うか、スペースを使うか)</li>
<li><strong>indent_size</strong>、<strong>tab_width</strong>(インデントのサイズ)</li>
<li><strong>trim_trailing_whitespace</strong>(保存するときに行末の空白除去)</li>
<li><strong>insert_final_newline</strong>(Ver.9.20(現在β版)以降 最後の行に改行を付けるかどうか）</li>
</ul>
<section id="EXPLANATION-1" class="level4">
<h4>EditorConfigを有効にする</h4>
<p>「EditorConfig」を有効にするには「<span class="env">動作環境</span> - 環境 - editorconfig」を開き、「editorconfigの検出」にチェックを入れます。</p>
<p><img src="./2_editorconfig_01.png" width="554" height="233" alt="editorconfigの設定" /><br />
</p>
<ul>
<li><p>「タブ幅等の体裁」は以下の設定が対象です。</p>
<ul>
<li><strong>indent_style</strong>(インデントの種類。タブコードを使うか、スペースを使うか)</li>
<li><strong>indent_size</strong>、<strong>tab_width</strong>(インデントのサイズ)</li>
<li><strong>trim_trailing_whitespace</strong>(保存するときに行末の空白を除去するか)</li>
<li><strong>insert_final_newline</strong>(最後の行に改行を付けるかどうか）</li>
</ul>
<p>インデントの種類が変更になっても、既存の内容を変更することはありません。<br />
例えば、タブでインデントしてあったファイルを開いても、スペースに置換するようなことしません。ファイル編集時の設定が変わるだけです。</p></li>
<li><p>「エンコードの種類」は以下の設定が対象です。</p>
<ul>
<li><strong>charset</strong>(ファイルのエンコード)</li>
<li><strong>end_of_line</strong>(改行コードの設定)</li>
</ul>
<p>エンコードを変更する場合は「内容を維持して変換」を行います。</p></li>
<li><p>上記2つのグループに対し、条件に一致した場合の動作を設定します。</p>
<ol class="example" type="1">
<li><p>「適用しない」<br />
.editorconfigの内容を無視します。</p></li>
<li><p>「適用せず、注目バーを自動表示」<br />
注目バーをクリックすると、適応させる項目が表示されます。<br />
<img src="./2_editorconfig_02.png" width="656" height="137" alt="注目バーを自動表示" /><br />
<br />
適応すると、ファイルは「更新」状態になります。</p></li>
<li><p>「適用して、注目バーを常に表示」<br />
注目バーを表示し、適応内容を表示します。<br />
<img src="./2_editorconfig_03.png" width="530" height="97" alt="注目バーに表示" /><br />
</p></li>
<li><p>「適用する」<br />
確認なしで適用します。</p></li>
</ol>
<p>(3)と(4)の場合は、変更があってもファイルは「更新」状態になりません。</p></li>
</ul>
<p>適用したインデントの設定が、元の「<span class="filetype">ファイルタイプ別の設定</span>」と異なっても、「一時的な設定」にはなりません。</p>
<hr />
<ul>
<li><p>ファイル構成の例。</p>
<pre class="macro"><code>base
┣.editorconfig ()
┃ root = true
┃ [*.txt]
┃ end_of_line = crlf
┃
┣file1.txt
┃
┗folder1
  ┣file1-1.txt
  ┃
  ┗folder2
    ┃
    ┣.editorconfig (root = false)
    ┃ root = false
    ┃ [*]
    ┃ end_of_line = crlf
    ┃ [*.txt]
    ┃ end_of_line = lf
    ┃
    ┗file2-1.txt</code></pre>
<p>「editorconfigの検出」が有効な場合、開いたファイルのあるフォルダを起点として、上方向に「.editorconfig」を検索します。ドライブのルートフォルダにたどり着くか、「root = true」の記述がある「.editorconfig」が見つかるまで検索します。</p>
<ul>
<li>「file1-1.txt」を開いた場合、上方向へ検索を開始するので、「base」にある「.editorconfig」が有効です。</li>
<li>「file2-1.txt」を開いた場合、同じフォルダにある「.editorconfig」と、「base」にある「.editorconfig」の両方が有効です。</li>
</ul>
<hr />
<p>複数の「.editorconfig」が見つかり、設定が重複している場合は対象のファイルに近い「.editorconfig」の内容が優先されます。</p>
<ul>
<li>「file2-1.txt」を開いた場合、同じフォルダに「.editorconfig」があるので、「end_of_line = lf」が適用される。</li>
</ul>
<hr />
<p>「.editorconfig」内に複数のマッチする条件があり、設定が重複している場合は、最後にマッチした内容が有効です。</p>
<ul>
<li>「file2-1.txt」を開いた場合、"[*]" により全部のファイルにマッチするので「end_of_line = crlf」が適用されるが、後にある"[*.txt]" で「end_of_line = lf」が最終的に有効になる。</li>
</ul></li>
</ul>
</section>
</section>
<section id="SUPPLEMENTATION" class="level3">
<h3>[補足]</h3>
<section id="SUPPLEMENTATION-1" class="level4">
<h4>設定ファイルの記述方法</h4>
<p>「.editorconfig」の記述方法です。エンコードは「UTF-8」にしてください。
(「BOM」は基本的には不要。秀丸エディタは「BOM」があっても大丈夫ですが、他の環境で問題となる場合あり。)</p>
<p>形式的には、iniファイルに似ていて、以下の形式になります。</p>
<pre class="macro"><code>#コメント
;コメント
root = true

[適用するファイル1]
設定名 = 設定値

[適用するファイル2]
設定名 = 設定値</code></pre>
<ul>
<li><p>「適用するファイル」の記述方法です。</p>
<p>ファイル名を直接指定。フォルダ名がない場合は、ファイル名のみにマッチします。</p>
<pre class="macro"><code>[README.TXT]
charset = utf-8</code></pre>
<p>フォルダを指定する場合は区切り文字として "/" を使うこと。</p>
<pre class="macro"><code>[Document/README.TXT]
charset = utf-8</code></pre>
<div class="mark_dt">
<p>ファイル名には、コマンドプロンプトのワイルドカードに似ている記号を使うことが出来ます。</p>
<dl>
<dt><strong>*</strong></dt>
<dd>
<p>"/"を含まない任意の文字列</p>
<p>以下のように、"*"を指定した場合は全てのファイルという意味になる</p>
<pre class="macro"><code>[*]
charset = utf-8</code></pre>
</dd>
<dt><strong>**</strong></dt>
<dd>
任意の文字列
</dd>
<dt><strong>?</strong></dt>
<dd>
任意の1文字
</dd>
<dt><strong>{str1,str2}</strong></dt>
<dd>
<p>str1 または str2</p>
<pre class="macro"><code>#readme.md または readme.txt に対応させる場合
[{readme.md, readme.txt}]
#以下の書き方でもOK
#[readme.{md, txt}]
charset = utf-8</code></pre>
<p>他の記号と組み合わせる事も可能</p>
<pre class="macro"><code>#拡張子が md または txt に対応させる場合
[*.{md, txt}]
charset = utf-8</code></pre>
</dd>
</dl>
</div>
<p>"*" と "**"の違い。<br />
フォルダの指定があるとわかりやすいです。</p>
<ul>
<li><p>例1</p>
<pre class="macro"><code>[folder1/*.txt]
charset = utf-8</code></pre>
<p>folder1直下にある拡張子が「txt」のファイルにマッチします。サブフォルダにある拡張子が「txt」のファイルにはマッチしません。</p>
<pre><code>◎: folder1\file1.txt
×: folder1\sub1\file1.txt</code></pre></li>
<li><p>例2</p>
<pre class="macro"><code>[folder2/**.txt]
charset = utf-8</code></pre>
<p>folder2および、folder2以下のフォルダにある 拡張子が「txt」のファイルにマッチします。</p>
<pre><code>◎: folder2\file1.txt
◎: folder2\sub1\file1.txt</code></pre></li>
</ul></li>
<li><p>「設定名」と「設定値」は以下になります。</p>
<div class="mark_dt">
<dl>
<dt>root</dt>
<dd>
<p>ファイルの先頭に記述します。「.editorconfig」の検索を継続するかを設定。</p>
<p>設定値</p>
<ul>
<li>true<br />
現在のファイルで止める。</li>
<li>false<br />
上位のフォルダも検索する。</li>
</ul>
</dd>
<dt>indent_size</dt>
<dd>
<p>インデントの文字数を数値で指定。</p>
<p>設定値</p>
<ul>
<li>0以上の整数</li>
</ul>
</dd>
<dt>tab_width</dt>
<dd>
<p>インデントの文字数を数値で指定。
indent_size が指定されていないときは、この値を使う。</p>
<p>設定値</p>
<ul>
<li>0以上の整数</li>
</ul>
</dd>
<dt>indent_style</dt>
<dd>
<p>インデントのスタイルの設定。インデントを空白で入力するか、タブコードを入力するか。</p>
<p>設定値</p>
<ul>
<li>tab<br />
タブコード</li>
<li>space<br />
スペース</li>
</ul>
</dd>
<dt>trim_trailing_whitespace</dt>
<dd>
<p>保存時、行末にある空白を除去。</p>
<p>設定値</p>
<ul>
<li>false<br />
除去しない</li>
<li>true<br />
除去する</li>
</ul>
</dd>
<dt>insert_final_newline</dt>
<dd>
<p>最後の行が改行で終わっていない場合、保存時に改行を付けるかどうか。(Ver.9.20(現在β版)以降対応)</p>
<p>設定値</p>
<ul>
<li>false<br />
追加しない</li>
<li>true<br />
追加する</li>
</ul>
</dd>
<dt>end_of_line</dt>
<dd>
<p>改行の種類</p>
<p>設定値</p>
<ul>
<li>cr</li>
<li>lf</li>
<li>crlf</li>
</ul>
</dd>
<dt>charset</dt>
<dd>
<p>ファイルのエンコード</p>
<p>設定値</p>
<ul>
<li>latin1</li>
<li>utf-8</li>
<li>utf-8-bom</li>
<li>utf-16be</li>
<li>utf-16le</li>
</ul>
</dd>
</dl>
</div></li>
</ul>
</section>
<section id="SUPPLEMENTATION-2" class="level4">
<h4>マクロ関連</h4>
<ul>
<li>「.editorconfig」の設定が元の「<span class="filetype">ファイルタイプ別の設定</span>」と異なっても、「一時的な設定」にはならないので <code>configstate</code> キーワードを見ても設定が変更されたかどうかは判断できない。</li>
<li>適用後に設定を getconfig で見ても、適用された内容が取得できる。</li>
</ul>
</section>
</section>
</section>
</section>
<hr />
<p><a href="#TOP">ページトップ</a>　<a href="hmindex0.html">目次に戻る</a></p>
</body>
</html>
