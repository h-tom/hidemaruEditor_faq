<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta charset="Shift_JIS" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="author" content="" />
  <title>第II部〜知っていると便利な秀丸の機能　grep/タグジャンプ</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="base.css" />
  <!--[if lt IE 9]>
    <script src="./html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><a href="./hmindex0.html"><img src="./hide_by2.png" width="88" height="32" alt="Hidemaru Q and A" /></a></p>
<section id="TOP" class="level1">
<h1>第II部〜知っていると便利な秀丸の機能<br>　grep/タグジャンプ</h1>
<hr />
<section id="grep" class="level2">
<h2>grep/タグジャンプ</h2>
<p>現在編集しているファイルの内容や、あるフォルダに置かれている複数のファイルから、特定の文字列を含んだ行を全て調べる事ができます(<strong>grep("ぐれっぷ"と読む(^^;)機能</strong>)。<br />
また、調べた結果の出力ファイルを使って文字列の見つかった行(ファイル)へ直接移動ができます(<strong>タグジャンプ機能</strong>)。</p>
<ul>
<li><a href="#process">[手順]</a></li>
<li><a href="#SUPPLEMENTATION">[補足]</a>
<ul>
<li><a href="#SUPPLEMENTATION-1">タグジャンプ</a></li>
<li><a href="#SUPPLEMENTATION-2">grepのダイアログ</a></li>
<li><a href="#SUPPLEMENTATION-3">検索するフォルダ</a></li>
<li><a href="#SUPPLEMENTATION-4">検索するファイル</a></li>
<li><a href="#SUPPLEMENTATION-5">文字数制限の設定</a></li>
<li><a href="#SUPPLEMENTATION-6">補助メニュー</a></li>
</ul></li>
</ul>
<section id="process" class="level3">
<h3>[手順]</h3>
<p>例えば、<strong>c:\diary</strong> フォルダにある、<strong>txt</strong> という拡張子を持つファイルから、「<strong>Love</strong>」という文字列を含む全ての行を調べたいとします。</p>
<ol type="1">
<li><p>メニューバーから「<strong>検索→grepの実行</strong>」を選択して下さい。</p>
<p><img src="./2_grep_01.png" width="464" height="338" alt="grepダイアログ" /><br />
</p></li>
<li><p>一番上にある「<strong><span class="font_blue">検索する文字列</span></strong>」の部分に探したい文字列(今の例だと「<strong>Love</strong>」)を記入して下さい。</p>
<p>通常は1行のみですが、複数行入力もできます。「<strong><span class="font_blue">検索する文字列</span></strong>」入力欄横にある<span class="rotate90">▲</span>マークを押すと表示されるメニューから、「<strong>複数行</strong>」を選択します。</p>
<p><img src="./2_grep_08.png" width="496" height="135" alt="複数行入力" /><br />
</p></li>
<li><p>その下にある「<strong><span class="font_blue">検索するファイル</span></strong>」の部分に、検索対象となるファイル名を記入します(今の例だと「<strong>*.txt</strong>」)。<br />
※現在編集中の内容に対して実行したい時は、入力ボックスの右端にある矢印 <span class="rotate90"><strong>&gt;</strong></span> をクリックして"<strong>(現在の内容)</strong>"を選択して下さい。<br />
　<img src="./2_grep_06.png" width="356" height="54" alt="現在の内容" /><br />
</p>
<p>※ファイル名には<strong>MS-DOS</strong>のコマンドライン入力でお馴染み(?)の「<strong>ワイルドカード</strong>」が使用できます。<br />
　ワイルドカードとは、<code>"*"</code>(アスタリクス) と <code>"?"</code> (クエスチョンマーク) の事で、</p>
<ul>
<li><code>"*"</code>は、0文字以上の文字列</li>
<li><code>"?"</code>は、0文字、または1文字</li>
</ul>
<p>　を表します。</p>
<p>複数のファイル名を入力したい時は、ファイル名を<span class="monospace">";"</span>(半角のセミコロン)で区切って下さい。</p>
<div class="macro">
<pre><code>例) *.txt;file\_?.man;a.doc</code></pre>
</div>
<p>上記の例では、</p>
<dl>
<dt><code>*.txt</code></dt>
<dd>
任意文字列が前にある<code>".txt"</code>というファイル = 拡張子が <code>".txt"</code> のファイル
</dd>
<dt><code>file\_?.man</code></dt>
<dd>
fileフォルダにある、<code>"_"</code> の後に0または1文字がある、拡張子が <code>".man"</code> というファイル
</dd>
<dt><code>a.doc</code></dt>
<dd>
<code>a.doc</code> というファイル
</dd>
</dl>
<p>の3つから検索することになります。</p>
<p><span class="attention_red">「検索するファイル」</span>に関しては、<a href="#SUPPLEMENTATION">[補足]</a>−<a href="#SUPPLEMENTATION-4">検索するファイル</a> も参照。除外したいファイルの設定が出来ます。</p>
<p>Ver.8.73以降から、「<strong><span class="font_blue">検索するファイル</span></strong>」の部分に、直接「<span class="attention_red">除外したい拡張子</span>」を指定する事が出来ます。「<span class="attention_red">除外したい拡張子</span>」を指定すると、「動作環境」で除外設定した拡張子と直接指定した拡張子が、除外対象になります。
(「動作環境」の設定を上書きするわけではない)</p>
<div class="macro">
<pre><code>&lt;!*.xxx&gt;</code></pre>
</div>
<p>「<code>&lt;!</code>」に続き、除外したい内容を記述し、「<code>&gt;</code>」で閉じます。複数指定する場合は「<code>;</code>」で区切って入力します。</p>
<div class="macro">
<pre><code>例1)*.*&lt;!*.txt&gt;
例2)*.*&lt;!*.txt;*.html&gt;</code></pre>
</div>
<p>例1)は、<code>"*.*"</code>(全てのファイル)を対処とするが、<code>"*.txt"</code> は除外。<br />
例2)は、<code>"*.*"</code>(全てのファイル)を対処とするが、<code>"*.txt"</code> と <code>"*.html"</code> は除外。</p>
<p>となります。</p>
<p>除外するファイルの入力をアシストする機能もあります。<a href="#SUPPLEMENTATION-6">補助メニュー</a>を参照してください。</p></li>
<li><p>その下にある「<strong>検索するフォルダ</strong>」で、検索対象のファイルのあるフォルダを選択します(今の例だと「<strong>c:\diary</strong>」)。「...」ボタンを押すと、フォルダ参照ダイアログが開き、フォルダを選択可能です。</p>
<p>Ver.8.85以降から、「<strong><span class="font_blue">検索するファイル</span></strong>」の部分に、「<span class="attention_red">除外したいフォルダ</span>」を指定する事が出来ます。</p>
<div class="macro">
<pre><code>&lt;!フォルダ名\&gt;</code></pre>
</div>
<p>「<code>&lt;!</code>」に続き、除外したいフォルダ名記述し、「<code>&gt;</code>」で閉じます。<span class="attention_red">フォルダ名の最後には必ず 「<code>\</code>」 を付けること。</span>複数指定する場合は「<code>;</code>」で区切って入力します。</p>
<div class="macro">
<pre><code>例1)*.*&lt;!folder1\&gt;
例2)*.*&lt;!folder1\;folder2\&gt;
例3)*.*&lt;!folder*\&gt;</code></pre>
</div>
<p>例1)は、<code>"*.*"</code>(全てのファイル)を対処とするが、<code>"folder1"</code> は除外。<br />
例2)は、<code>"*.*"</code>(全てのファイル)を対処とするが、<code>"folder1"</code> と <code>"folder2"</code> は除外。<br />
例3)は、<code>"*.*"</code>(全てのファイル)を対処とするが、<code>"folder*"</code> にマッチするフォルダは除外。</p>
<p>となります。</p>
<p>除外するフォルダの入力をアシストする機能もあります。<a href="#SUPPLEMENTATION-6">補助メニュー</a>を参照してください。</p></li>
<li><p>チェックボックスの内、該当する物にチェックをします。</p>
<ul>
<li><p><strong>「<span class="font_blue">大文字／小文字の区別</span>」チェックボックス：</strong><br />
検索文字列の大文字と小文字を区別して検索します。この項目がOFFの場合、上の例で「<strong>LOVE</strong>」や「<strong>love</strong>」も検索されます。</p></li>
<li><p><strong>「<span class="font_blue">単語の検索</span>」チェックボックス：</strong><br />
この項目がONになっていると、「<strong>Lover</strong>」や「<strong>ILoveNY</strong>」等の、ある単語の一部になっている場合は検索されません。ここで言う「<strong>単語</strong>」とは、<strong>半角英字とアンダースコア("_")のみで構成された文字(列)</strong>を指します。</p></li>
<li><p><strong>「<span class="font_blue">正規表現</span>」チェックボックス：</strong><br />
検索文字列に「<strong>正規表現</strong>」が使える様になります。<br />
「<strong>正規表現</strong>」は「<a href="./4_regular.html">正規表現について</a>」を参照して下さい。</p></li>
<li><p><strong>「<span class="font_blue">あいまい検索</span>」チェックボックス：</strong><br />
「正規表現」をさらに便利にした「<strong>あいまい</strong>」な検索が可能になります(全半角同一視等…説明もあいまい(^^;)。<br />
「<strong>あいまい検索</strong>」は「<a href="./2_fuzzy.html">あいまい検索について</a>」を参照して下さい。</p></li>
<li><p><strong>「<span class="font_blue">追加の条件</span>」チェックボックス：</strong><br />
追加の条件に従って検索する範囲を制限できます。<br />
<a href="./2_find.html">検索</a>の<a href="./2_find.html#SUPPLEMENTATION-1">「追加の条件」について</a>を参照してください。</p></li>
<li><p><strong>「<span class="font_blue">検索文字列を強調</span>」チェックボックス</strong><br />
検索後、検索に該当する文字列を強調表示します。</p></li>
<li><p><strong>「<span class="font_blue">ヒットしない行</span>」チェックボックス</strong><br />
これをONにすると、ヒットしない行を出力します。「追加の条件」が指定されている場合は、この設定は無効になります。</p></li>
<li><p><strong>「<span class="font_blue">サブフォルダも検索</span>」チェックボックス：</strong><br />
この項目がONの時、指定されたフォルダにサブフォルダがある場合そのサブフォルダの中のファイルも検索します。</p></li>
<li><p><strong>「<span class="font_blue">最小化状態で実行</span>」チェックボックス：</strong><br />
grepの実行時は実行結果を表示するための秀丸エディタウィンドウを自動で開きますが、この項目がONの時はgrepの実行が終了するまで、この結果表示ウィンドウをアイコン化します。</p></li>
<li><p><strong>「<span class="font_blue">出力形式</span>」メニュー：</strong><br />
grep結果の出力形式を横にある<span class="rotate90">▲</span>マークを押すと表示されるメニューから設定します。</p>
<p><img src="./2_grep_12.png" width="484" height="163" alt="出力形式の設定" /><br />
</p>
<p>チェック付きのメニューになっていて、個別にON/OFFできます。全部チェックがOFFだと「標準」となりますが、チェックをONにすると、その項目が表示されます。</p>
<p>「出力形式」は7.を参照</p>
<ul>
<li>「ファイル名一覧だけ作成」</li>
<li>「ファイル名をフルパスで出力」</li>
<li>「桁表示」</li>
<li>「ヒット文字列のみ」</li>
<li>「日付順」</li>
</ul></li>
<li><p><strong>「<span class="font_blue">エンコードの種類</span>」コンボボックス：</strong><br />
検索するファイルのエンコードを指定します。「自動判定」で不都合がある場合には、指定してみてください。ただし、検索対象が全部同じエンコードでないと、誤判定します。</p></li>
<li><p><strong>「<span class="font_blue">出力先</span>」コンボボックス：</strong><br />
grep結果の出力先を指定します。</p>
<ul>
<li>「自動」の場合は、新しいタブ、新しい秀丸エディタウィンドウを開きます。</li>
<li>「単一」は、grep結果を再利用します。なければ「自動と同じ」。</li>
<li>「タブグループごと」は、タブグループ内にgrep結果があれば再利用します。</li>
<li>「アウトプット枠」は、アウトプット枠を開き、そこに出力します。</li>
</ul></li>
</ul></li>
<li><p>右上の「OK」ボタンを押すと検索が始まります。</p></li>
<li><p>実行が終わると結果を表示するウィンドウができています。その内容は「<strong>出力形式]</strong>」によって少し違います。わかりやすいよう各項目を個別に有効にしましたが、組み合わせることも可能です。</p>
<ul>
<li><p><strong>「ファイル名一覧だけ作成」</strong><br />
この項目がONの時は検索文字列が存在したファイル名(と始めに見つかった行番号)だけを結果として書き出します。</p>
<p>[実行結果の例("file?.txt"について"２"を検索)]</p>
<div class="macro">
<pre><code>file1.txt(2)
file2.txt(2)
file3.txt(2)
file4.txt(2)
(以下略)</code></pre>
</div></li>
<li><p><strong>「ファイル名をフルパスで出力」</strong><br />
検索文字列が見つかった場合、ファイル名だけではなくフルパスで表示します。</p>
<p>[実行結果の例("file?.txt"について"２"を検索)]</p>
<div class="macro">
<pre><code>C:\TEMP\file1.txt(2): ファイル1の２行目
C:\TEMP\file1.txt(12): ファイル1の１２行目
C:\TEMP\file1.txt(20): ファイル1の２０行目
C:\TEMP\file2.txt(2): ファイル2の２行目
C:\TEMP\file2.txt(12): ファイル2の１２行目
C:\TEMP\file2.txt(20): ファイル2の２０行目
(以下略)</code></pre>
</div></li>
<li><p><strong>「桁表示」</strong><br />
検索文字列が見つかった場合、行数と桁数(Unicode(UTF-16)として数えた桁数)を出力します。</p>
<p>[実行結果の例("file?.txt"について"２"を検索)]</p>
<div class="macro">
<pre><code>file1.txt(2,7): ファイル1の２行目
file1.txt(12,8): ファイル1の１２行目
file1.txt(20,7): ファイル1の２０行目
file2.txt(2,7): ファイル2の２行目
file2.txt(12,8): ファイル2の１２行目
file2.txt(20,7): ファイル2の２０行目
(以下略)</code></pre>
</div></li>
<li><p><strong>「ヒット文字列のみ」</strong><br />
マッチした文字を含む行ではなく、マッチした文字列のみ出力します。</p>
<p>[実行結果の例("file?.txt"について"２"を検索)]</p>
<div class="macro">
<pre><code>file1.txt(2): ２
file1.txt(12): ２
file1.txt(20): ２
file2.txt(2): ２
file2.txt(12): ２
file2.txt(20): ２
(以下略)</code></pre>
</div></li>
<li><p><strong>「日付順」</strong><br />
出力順をファイルの日付順(新しいファイルが早い)にします。
(file1.txt をコピー・編集して file2.txt を作成したので、 file2.txt が先に出力される)</p>
<p>[実行結果の例("file?.txt"について"２"を検索)]</p>
<div class="macro">
<pre><code>file2.txt(2): ファイル2の２行目
file2.txt(12): ファイル2の１２行目
file2.txt(20): ファイル2の２０行目
file1.txt(2): ファイル1の２行目
file1.txt(12): ファイル1の１２行目
file1.txt(20): ファイル1の２０行目
(以下略)</code></pre>
</div></li>
</ul></li>
<li><p>見つかったファイルに移動する(タグジャンプ機能)</p>
<p>結果ウィンドウのファイル名の部分にカーソルがある状態で「<strong>その他→タグジャンプ</strong>」(デフォルトでは<span class="btn-push">F10</span>キー)を選択すると、
(開かれていない時は開いてから)<strong>そのファイルの該当する行へ移動</strong>できます。</p>
<p>また、「<strong>バックタグジャンプ</strong>」で元の結果ウィンドウに戻る事もできます。</p>
<p>さらに、この結果ウィンドウをファイルとして保存もできて、上記の「<strong>タグジャンプ</strong>」も後から使用できます。
(ファイル名がフルパスでない場合は、ファイルを開いた箇所からの相対パスになるので、「<strong>検索するフォルダ</strong>」に結果を保存する必要があります)</p></li>
</ol>
</section>
<section id="SUPPLEMENTATION" class="level3">
<h3>[補足]</h3>
<p>grepに関係する「<strong>動作環境</strong>」です。</p>
<p><img src="./2_grep_02.png" width="613" height="437" alt="動作環境−grepダイアログ" /><br />
</p>
<p><img src="./2_grep_03.png" width="613" height="437" alt="動作環境−grepの動作" /><br />
</p>
<section id="SUPPLEMENTATION-1" class="level4">
<h4>タグジャンプ</h4>
<p>設定により、結果ウィンドウのファイル名の部分をダブルクリックする事で、タグジャンプさせる事も可能です。「<span class="env">動作環境</span>−検索−grepの動作」にある、「grep結果」の「<strong>grep結果上ではダブルクリック=タグジャンプとする</strong>」に、チェックを入れてください。</p>
<p>「タグジャンプ」は秀丸エディタが出力した形式のみ有効ですが、ファイル名と行番号の判定方法をカスタマイズできます。<br />
「<span class="env">動作環境</span>−その他のコマンド−タグジャンプ」にある、「タグジャンプ」の「<strong>タグジャンプ対象を正規表現で指定</strong>」をONにし、「ファイル名部分」と「行番号部分」を正規表現で指定できます。</p>
<p><img src="./2_grep_11.png" width="578" height="194" alt="動作環境−タグジャンプ対象を正規表現で指定" /><br />
</p>
</section>
<section id="SUPPLEMENTATION-2" class="level4">
<h4>grepのダイアログ</h4>
<p>grepダイアログの種類は2種類あります。</p>
<p><strong>新タイプ</strong>は、<a href="#process">[手順]</a>にあるダイアログで、<strong>普通タイプ</strong>は、フォルダ選択画面と一体になっています。</p>
<p><img src="./2_grep_04.png" width="503" height="388" alt="動作環境−grepダイアログ普通タイプ" /><br />
</p>
<p><strong>新タイプ</strong>はフォルダ選択ダイアログが別になっている事もあり、種類も変更可能です。好みに応じて設定を変更してください。</p>
</section>
<section id="SUPPLEMENTATION-3" class="level4">
<h4>検索するフォルダ</h4>
<p>通常、grep実行時に開いているファイルの場所を「検索するフォルダ」に自動的にセットしますが、前回grep実行時のフォルダを最初からセットできます。</p>
<p>「<span class="env">動作環境</span> − 検索 − grepダイアログ − grepのダイアログボックス」にある、「<strong>前回のフォルダを使う</strong>」にチェックを入れてください。</p>
<p>Ver.8.71より、「grepダイアログ」の「検索するフォルダ」の横に<span class="attention_red">ピン留めアイコン</span>が追加され、「<strong>前回のフォルダを使う</strong>」の設定を「grepダイアログ」から変更可能です。</p>
<p><img src="./2_grep_07.png" width="382" height="34" alt="前回のフォルダを使うのピン" /><br />
</p>
<p>「<span class="attention_red">ピン留めアイコン</span>」自体を表示するかしないかも、「<span class="env">動作環境</span> − 検索 − grepダイアログ − grepのダイアログボックス」にある「ピン止めボタン表示」のチェックボックスで設定可能です。</p>
<p>「検索するフォルダ」は、「検索するファイル」と違い、複数箇所の指定は出来ません。</p>
</section>
<section id="SUPPLEMENTATION-4" class="level4">
<h4>検索するファイル</h4>
<p>「<span class="env">動作環境</span> − 検索 − grepダイアログ − grepの動作」で、検索するファイルの設定が可能です。</p>
<ul>
<li><p>「検索するファイル」の指定にマッチするファイルに対し、「除外」する方向の設定。</p>
<ul>
<li><p><span class="font_blue">隠しファイルを除外</span><br />
ファイル・フォルダの属性で、「隠しファイル」(HIDDEN)フラグが設定されいる場合は、対象ファイル・フォルダでも除外します。</p></li>
<li><p><span class="font_blue">バイナリファイルと思わしきファイルを除外</span><br />
exeファイルなどテキストではないファイルを、除外します。</p>
<p>exeファイル等、あきらかに拡張子で判定可能なものは拡張子で判断し、それ以外はファイルを開いて判定します。</p></li>
<li><p><span class="font_blue">指定した拡張子を除外</span><br />
指定した拡張子を持つファイルを、対象外にします。</p>
<p>記述方法は2つあり、記述方法が異なるので注意。(混在は不可)</p>
<ul>
<li><p>拡張子を指定する記述方法<br />
<span class="monospace">"."</span>(ドット)を含まない拡張子を指定します。実行ファイルの場合、
<span class="monospace">".exe"</span> ではなく <span class="monospace">"exe"</span> と指定する。</p>
<p>複数の拡張子を指定する場合は " "(スペース)で区切る。<br />
実行ファイル(*.exe)とDLL(*.dll)を除外する場合：<span class="monospace">exe dll</span></p></li>
<li><p>ワイルドカードを含む文字列を指定する記述方法<br />
"*"(アスタリクス)、"?"(クエスチョンマーク)を含む場合です。単独の場合はそのまま記述してください。"*.exe"等。</p>
<p>複数指定する場合は ";"(セミコロン)で区切る。<br />
実行ファイル(*.exe)とDLL(*.dll)を除外する場合：<span class="monospace">*.exe;*.dll</span></p>
<p>ワイルドカードにマッチするかどうかの判定方法は、「拡張子を厳密にチェックする」をONにした時と同じロジックになるとの事。</p></li>
</ul>
<p>Ver.8.85以降、「ワイルドカードを含む文字列を指定する記述方法」の場合、「除外するフォルダ」も指定可能です。フォルダ名の最後には必ず 「<code>\</code>」 を付けること。</p>
<p>以下の例は、拡張子がdll、exe、doc のファイルと、「temp」というフォルダを除外します。</p>
<pre><code>例)*.dll;*.exe;*.doc;temp\</code></pre></li>
</ul></li>
<li><p>「検索するファイル」でワイルドカード使用した場合の確認方法</p>
<ul>
<li><p><span class="font_blue">拡張子と短縮ファイル名を厳密にチェックする。</span><br />
ワイルドカード使用時のファイル名チェックについての設定です。チェックを入れておく事をお勧めします。</p>
<ul>
<li><p>説明</p>
<p>OSの歴史的な経緯が絡んでいます。<br />
MicrosoftのWindows以前のOSである「MS-DOS」は、ファイル名は英数字で8文字(8バイト)、拡張子は3文字(3バイト)までしか扱えません。(8.3形式)<br />
Windowsが登場しファイル名の制限が緩和されましたが、
MS-DOSとの互換性を考慮しMS-DOSのファイル名規則に当てはまらないファイルが作成された場合には、
OSが自動的にMS-DOS規格のファイル名も作成します。</p>
<div class="cmdprompt">
<pre><code>コマンドプロンプトから dir /x で 8.3形式 のファイル名を確認できる。
2016/05/19  19:09                34              file1.txt
2016/05/19  19:09                35              file2.txt
2016/05/19  19:09                35              file3.txt
2016/05/19  19:10                45 FILE3_~2.TXT file3_2longname.txt
2016/05/19  19:10                44 FILE3_~1.TXT file3_longname.txt
                                    ↑ OSが自動的に作成した名前
                                       ファイル名が8.3形式以外の場合作成される。</code></pre>
</div>
<p>上記のようなファイルがあり、チェックなしの状態で検索するファイルに <strong>"*1.txt"</strong> を指定すると、</p>
<div class="macro">
<pre><code>file1.txt(1): 短縮名ファイルのテスト:file1.txt
file3_longname.txt(1): 短縮名ファイルのテスト：file3_longname.txt</code></pre>
</div>
<p>という結果になり、本来対象にならないはずの「file3_longname.txt」が対象になっています。これは、OSが自動的に作成したMS-DOS規格のファイル名「FILE3_~1.TXT」が "*1.txt" にマッチするからです。</p>
<p>拡張子部分も同様で、4文字以上の拡張子を付けると、OSが自動的にMS-DOS規格のファイル名を作成します。</p>
<div class="cmdprompt">
<pre><code>2016/05/19  22:57                37 FILE1~1.HTM  file1.html
2016/05/19  22:58                35              file2.htm
                                    ↑ OSが自動的に作成した名前
                                       ファイル名が8.3形式以外の場合作成される。</code></pre>
</div>
<p>チェックなしの状態で、検索するファイルに <strong>"*.htm"</strong> を指定すると、</p>
<div class="macro">
<pre><code>file1.html(1): 短縮名ファイルのテスト：file1.html
file2.htm(1): 短縮名ファイルのテスト：file2.htm</code></pre>
</div>
<p>という結果になり、本来対象にならないはずの「file1.html」が対象になっています。これは、OSが自動的に作成したMS-DOS規格のファイル名「FILE1~1.HTM」が "*.htm" にマッチするからです。</p>
<p>この動作はOSの仕様で、ワイルドカードを使用したファイル検索すると元の名前だけでなく8.3形式の名前に対してもチェックを行い、どちらかにマッチした場合はマッチしたと判定するためです。</p>
<p>"<span class="font_blue">拡張子と短縮ファイル名を厳密にチェックする。</span>"にチェックを入れておくと、上記のような事は起こらなくなります。</p></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="SUPPLEMENTATION-5" class="level4">
<h4>文字数制限の設定</h4>
<p><img src="./2_grep_05.png" width="455" height="344" alt="動作環境−grepの動作−文字数制限の設定" /><br />
</p>
<p>処理の都合上、マッチした行が長いと全部を表示しない場合や、正規表現の対象となる一行の文字数の上限があります。その制限に関する設定をします。</p>
<p>通常使用しているファイルで、1行の文字数が多くなければ、"<strong>小さい</strong>"や"<strong>大きい</strong>"で問題ないでしょう。どんなファイルでも必ずマッチさせたい場合は、"<strong>制限なし</strong>"を選択します。
(自身の使用環境により、適切と思われる設定してください)</p>
<ul>
<li>"<span class="font_blue">制限を超えたとき確認メッセージを表示</span>"にチェックを入れておくと、「制限なし」以外のとき、制限にかかった場合は警告を表示します。</li>
</ul>
</section>
<section id="SUPPLEMENTATION-6" class="level4">
<h4>補助メニュー</h4>
<p>「検索する文字列」入力部の横にある<span class="rotate90">▲</span>マークを押すと表示されるメニューは、<a href="./2_find.html#SUPPLEMENTATION-4">検索ダイアログ</a> と同じです。</p>
<p>「検索するファイル」入力部の横にある<span class="rotate90">▲</span>マークを押すと表示されるメニューです。</p>
<p><img src="./2_grep_10.png" width="302" height="234" alt="検索するファイルのメニュー" /><br />
</p>
<p>前半には、「<span class="env">動作環境</span> − ファイル − 「開く」のダイアログボックス」にある「ファイルの種類の編集」で、「「開く」のダイアログ」に設定した内容が表示されます。後半には「除外の設定」や、「除外する拡張子」「除外するサブフォルダ」の指定をアシストする機能もあります。</p>
</section>
</section>
</section>
</section>
<hr />
<p><a href="#TOP">ページトップ</a>　<a href="hmindex0.html">目次に戻る</a></p>
</body>
</html>
